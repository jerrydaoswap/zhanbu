<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥ç§˜å åœ | æ¢ç´¢å‘½è¿çš„å¥¥ç§˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5B21B6',
                        secondary: '#8B5CF6',
                        accent: '#C084FC',
                        dark: '#1E1B4B',
                        light: '#F5F3FF',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        serif: ['Merriweather', 'Georgia', 'serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow-lg { text-shadow: 0 4px 8px rgba(0, 0, 0, 0.25); }
            .bg-stars {
                background-image: radial-gradient(circle, #ffffff 1px, transparent 1px);
                background-size: 50px 50px;
            }
            .horoscope-card:hover { transform: scale(1.03); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1); }
            .ç”Ÿè‚–-card:hover { background-color: rgba(139, 92, 246, 0.1); }
            .btn-purple { @apply bg-primary hover:bg-secondary text-white font-medium py-2 px-6 rounded-full transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:bg-gray-500 disabled:cursor-not-allowed; }
            .nav-link { @apply relative px-4 py-2 text-light hover:text-accent transition-colors duration-300; }
            .nav-link::after { content: ''; @apply absolute w-0 h-0.5 bg-accent bottom-0 left-0 transition-all duration-300; }
            .nav-link:hover::after { @apply w-full; }
            
            .tarot-card-container { perspective: 1000px; }
            .tarot-card {
                position: relative; width: 100%; height: 100%;
                transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1);
                transform-style: preserve-3d;
            }
            .tarot-card.flipped { transform: rotateY(180deg); }
            .tarot-card-face {
                position: absolute; width: 100%; height: 100%;
                backface-visibility: hidden; -webkit-backface-visibility: hidden;
                border-radius: 0.75rem; overflow: hidden;
                box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            }
            .tarot-card-details { transform: rotateY(180deg); }
            .is-reversed-img { transform: rotate(180deg); }

            @keyframes shuffle {
                0%, 100% { transform: translateY(0) rotate(0); opacity: 0; }
                25% { transform: translateY(-20px) rotate(-5deg); opacity: 1; }
                75% { transform: translateY(20px) rotate(5deg); opacity: 1; }
            }
            .shuffling-card {
                @apply absolute w-56 h-96 bg-gradient-to-br from-primary to-secondary rounded-xl border-4 border-accent/30;
                animation: shuffle 1s ease-in-out infinite;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-dark to-primary min-h-screen text-light overflow-x-hidden">
    <!-- æ˜Ÿç©ºèƒŒæ™¯ -->
    <div class="fixed inset-0 bg-stars opacity-20 pointer-events-none"></div>
    
    <!-- å¯¼èˆªæ  -->
    <header class="fixed top-0 left-0 right-0 z-50 transition-all duration-500" id="navbar">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <a href="#home" class="flex items-center space-x-2">
                <i class="fa fa-moon-o text-2xl text-accent"></i>
                <span class="text-xl font-bold">ç¥ç§˜å åœ</span>
            </a>
            <nav class="hidden md:flex space-x-6">
                <a href="#home" class="nav-link">é¦–é¡µ</a>
                <a href="#tarot" class="nav-link">å¡”ç½—å åœ</a>
                <a href="#horoscope" class="nav-link">æ˜Ÿåº§è¿åŠ¿</a>
                <a href="#zodiac" class="nav-link">ç”Ÿè‚–å‘½ç†</a>
                <a href="#about" class="nav-link">å…³äºæˆ‘ä»¬</a>
            </nav>
            <button class="md:hidden text-2xl" id="menu-toggle"><i class="fa fa-bars"></i></button>
        </div>
        <div class="md:hidden bg-dark/90 backdrop-blur-md hidden" id="mobile-menu">
            <div class="container mx-auto px-4 py-4 flex flex-col space-y-4">
                <a href="#home" class="text-light hover:text-accent py-2 border-b border-gray-700">é¦–é¡µ</a>
                <a href="#tarot" class="text-light hover:text-accent py-2 border-b border-gray-700">å¡”ç½—å åœ</a>
                <a href="#horoscope" class="text-light hover:text-accent py-2 border-b border-gray-700">æ˜Ÿåº§è¿åŠ¿</a>
                <a href="#zodiac" class="text-light hover:text-accent py-2 border-b border-gray-700">ç”Ÿè‚–å‘½ç†</a>
                <a href="#about" class="text-light hover:text-accent py-2">å…³äºæˆ‘ä»¬</a>
            </div>
        </div>
    </header>

    <!-- ä¸»å†…å®¹ -->
    <main class="pt-24 pb-16">
        <!-- è‹±é›„åŒºåŸŸ -->
        <section id="home" class="relative min-h-[80vh] flex items-center justify-center text-center">
            <div class="absolute inset-0 bg-gradient-to-b from-dark/70 to-primary/70"></div>
            <div class="container mx-auto px-4 relative z-10">
                <h1 class="text-[clamp(2.5rem,6vw,4.5rem)] font-bold mb-6 leading-tight text-shadow-lg">æ¢ç´¢å‘½è¿çš„<span class="text-accent">å¥¥ç§˜</span></h1>
                <p class="text-[clamp(1rem,2vw,1.25rem)] max-w-2xl mx-auto mb-10 text-light/90">é€šè¿‡å¤è€çš„å åœè‰ºæœ¯ï¼Œæ´å¯Ÿè¿‡å»ã€ç°åœ¨ä¸æœªæ¥ï¼Œå¯»æ‰¾å†…å¿ƒçš„æŒ‡å¼•ä¸ç­”æ¡ˆ</p>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <a href="#tarot" class="btn-purple">å¡”ç½—å åœ</a>
                    <a href="#horoscope" class="btn-purple bg-secondary/80 hover:bg-secondary">æ˜Ÿåº§è¿åŠ¿</a>
                    <a href="#zodiac" class="btn-purple bg-secondary/60 hover:bg-secondary/80">ç”Ÿè‚–å‘½ç†</a>
                </div>
            </div>
        </section>

        <!-- å¡”ç½—å åœ -->
        <section id="tarot" class="py-20 bg-dark/50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold mb-4">å¡”ç½—å åœ</h2>
                    <p class="text-light/80 max-w-2xl mx-auto">ä¸“æ³¨å†…å¿ƒï¼Œæå‡ºä½ çš„é—®é¢˜ï¼Œè®©å¡”ç½—ç‰Œç»™ä½ æŒ‡å¼•</p>
                </div>
                <div class="max-w-4xl mx-auto">
                    <div class="flex justify-center gap-4 mb-8">
                        <button class="bg-primary px-5 py-2 rounded-full transition" data-spread="single">å•å¼ ç‰Œ</button>
                        <button class="bg-dark/70 hover:bg-primary/70 px-5 py-2 rounded-full transition" data-spread="three">ä¸‰å¼ ç‰Œ</button>
                    </div>
                    <div class="text-center mb-6">
                        <label for="tarot-question" class="block mb-2 text-light/80">åœ¨å¿ƒä¸­é»˜å¿µæ‚¨çš„é—®é¢˜ï¼Œå¹¶åœ¨æ­¤è¾“å…¥ï¼š</label>
                        <input type="text" id="tarot-question" placeholder="ä¾‹å¦‚ï¼šæˆ‘è¿‘æœŸçš„äº‹ä¸šè¿åŠ¿å¦‚ä½•ï¼Ÿ" class="w-full max-w-lg mx-auto bg-dark/50 border border-accent/30 rounded-lg px-4 py-2 text-light focus:outline-none focus:border-accent focus:ring-1 focus:ring-accent">
                    </div>
                    <div class="text-center mb-8">
                        <button id="draw-tarot" class="btn-purple"><i class="fa fa-random mr-2"></i>å¼€å§‹è§£ç‰Œ</button>
                    </div>

                    <div id="tarot-process-area" class="mt-12 min-h-[420px]">
                        <div id="shuffle-animation-container" class="relative w-full h-96 flex justify-center items-center hidden">
                            <div class="shuffling-card" style="animation-delay: 0s;"></div>
                            <div class="shuffling-card" style="animation-delay: 0.2s;"></div>
                            <div class="shuffling-card" style="animation-delay: 0.4s;"></div>
                            <p class="absolute bottom-0 text-accent font-serif">æ­£åœ¨æ´—ç‰Œ...</p>
                        </div>
                        <div id="question-display" class="text-center mb-8 hidden">
                            <p class="text-light/70">å…³äºæ‚¨çš„é—®é¢˜ï¼š</p>
                            <p class="text-accent text-xl font-serif" id="question-text"></p>
                        </div>
                        <div id="tarot-results"></div>
                        <div id="ai-interpretation-area" class="text-center mt-10 hidden">
                            <button id="ai-interpret-btn" class="btn-purple bg-accent/80 hover:bg-accent text-dark"><i class="fa fa-magic mr-2"></i>AI ç»“åˆé—®é¢˜è§£è¯»</button>
                            <div id="ai-result" class="mt-6 bg-dark/40 p-6 rounded-lg border border-accent/20 text-left hidden">
                                <p id="ai-result-text" class="text-light/90 whitespace-pre-wrap"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- æ˜Ÿåº§è¿åŠ¿ -->
        <section id="horoscope" class="py-20 bg-primary/30">
            <div class="container mx-auto px-4">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold mb-4">æ˜Ÿåº§è¿åŠ¿</h2>
                    <p class="text-light/80 max-w-2xl mx-auto">é€‰æ‹©ä½ çš„æ˜Ÿåº§ï¼ŒæŸ¥çœ‹ä¸åŒæ—¶é—´ç»´åº¦çš„è¿åŠ¿èµ°å‘</p>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="aries"><div class="text-4xl mb-3 text-accent">â™ˆ</div><h3 class="text-xl font-semibold mb-2">ç™½ç¾Šåº§</h3><p class="text-light/70 text-sm mb-4">3/21-4/19</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="taurus"><div class="text-4xl mb-3 text-accent">â™‰</div><h3 class="text-xl font-semibold mb-2">é‡‘ç‰›åº§</h3><p class="text-light/70 text-sm mb-4">4/20-5/20</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="gemini"><div class="text-4xl mb-3 text-accent">â™Š</div><h3 class="text-xl font-semibold mb-2">åŒå­åº§</h3><p class="text-light/70 text-sm mb-4">5/21-6/20</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="cancer"><div class="text-4xl mb-3 text-accent">â™‹</div><h3 class="text-xl font-semibold mb-2">å·¨èŸ¹åº§</h3><p class="text-light/70 text-sm mb-4">6/21-7/22</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="leo"><div class="text-4xl mb-3 text-accent">â™Œ</div><h3 class="text-xl font-semibold mb-2">ç‹®å­åº§</h3><p class="text-light/70 text-sm mb-4">7/23-8/22</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="virgo"><div class="text-4xl mb-3 text-accent">â™</div><h3 class="text-xl font-semibold mb-2">å¤„å¥³åº§</h3><p class="text-light/70 text-sm mb-4">8/23-9/22</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="libra"><div class="text-4xl mb-3 text-accent">â™</div><h3 class="text-xl font-semibold mb-2">å¤©ç§¤åº§</h3><p class="text-light/70 text-sm mb-4">9/23-10/22</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="scorpio"><div class="text-4xl mb-3 text-accent">â™</div><h3 class="text-xl font-semibold mb-2">å¤©èåº§</h3><p class="text-light/70 text-sm mb-4">10/23-11/21</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="sagittarius"><div class="text-4xl mb-3 text-accent">â™</div><h3 class="text-xl font-semibold mb-2">å°„æ‰‹åº§</h3><p class="text-light/70 text-sm mb-4">11/22-12/21</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="capricorn"><div class="text-4xl mb-3 text-accent">â™‘</div><h3 class="text-xl font-semibold mb-2">æ‘©ç¾¯åº§</h3><p class="text-light/70 text-sm mb-4">12/22-1/19</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="aquarius"><div class="text-4xl mb-3 text-accent">â™’</div><h3 class="text-xl font-semibold mb-2">æ°´ç“¶åº§</h3><p class="text-light/70 text-sm mb-4">1/20-2/18</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                    <div class="horoscope-card bg-dark/50 p-6 rounded-xl border border-accent/20 text-center" data-sign="pisces"><div class="text-4xl mb-3 text-accent">â™“</div><h3 class="text-xl font-semibold mb-2">åŒé±¼åº§</h3><p class="text-light/70 text-sm mb-4">2/19-3/20</p><button class="text-accent hover:underline text-sm">æŸ¥çœ‹è¿åŠ¿</button></div>
                </div>
                <div id="horoscope-detail" class="mt-16 bg-dark/70 backdrop-blur-md rounded-xl p-8 border border-accent/30 hidden">
                    <div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6">
                        <h3 class="text-2xl font-bold" id="horoscope-title"></h3>
                        <div id="horoscope-granularity-selector" class="flex flex-wrap gap-2">
                            <button data-granularity="day" class="px-3 py-1 text-sm rounded-full bg-primary">ä»Šæ—¥</button>
                            <button data-granularity="week" class="px-3 py-1 text-sm rounded-full bg-dark/70">æœ¬å‘¨</button>
                            <button data-granularity="month" class="px-3 py-1 text-sm rounded-full bg-dark/70">æœ¬æœˆ</button>
                            <button data-granularity="year" class="px-3 py-1 text-sm rounded-full bg-dark/70">æœ¬å¹´</button>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8" id="horoscope-indexes"></div>
                    <div class="bg-primary/20 p-6 rounded-lg">
                        <h4 class="font-semibold mb-3">ç»¼åˆè¿åŠ¿</h4>
                        <p class="text-light/80" id="horoscope-content"></p>
                    </div>
                    <div class="mt-6 text-right">
                        <button id="close-horoscope" class="text-accent hover:underline">å…³é—­</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç”Ÿè‚–å‘½ç† -->
        <section id="zodiac" class="py-20 bg-dark/50">
             <div class="container mx-auto px-4">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold mb-4">ç”Ÿè‚–å‘½ç†</h2>
                    <p class="text-light/80 max-w-2xl mx-auto">ç‚¹å‡»ä½ çš„ç”Ÿè‚–ï¼ŒæŸ¥çœ‹æ€§æ ¼ã€çº³éŸ³äº”è¡ŒåŠç”Ÿè‚–å…³ç³»</p>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="rat"><div class="text-4xl mb-3 text-accent">ğŸ€</div><h3 class="text-lg font-semibold">é¼ </h3></div>
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="ox"><div class="text-4xl mb-3 text-accent">ğŸ‚</div><h3 class="text-lg font-semibold">ç‰›</h3></div>
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="tiger"><div class="text-4xl mb-3 text-accent">ğŸ…</div><h3 class="text-lg font-semibold">è™</h3></div>
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="rabbit"><div class="text-4xl mb-3 text-accent">ğŸ‡</div><h3 class="text-lg font-semibold">å…”</h3></div>
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="dragon"><div class="text-4xl mb-3 text-accent">ğŸ‰</div><h3 class="text-lg font-semibold">é¾™</h3></div>
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="snake"><div class="text-4xl mb-3 text-accent">ğŸ</div><h3 class="text-lg font-semibold">è›‡</h3></div>
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="horse"><div class="text-4xl mb-3 text-accent">ğŸ</div><h3 class="text-lg font-semibold">é©¬</h3></div>
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="sheep"><div class="text-4xl mb-3 text-accent">ğŸ‘</div><h3 class="text-lg font-semibold">ç¾Š</h3></div>
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="monkey"><div class="text-4xl mb-3 text-accent">ğŸ’</div><h3 class="text-lg font-semibold">çŒ´</h3></div>
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="rooster"><div class="text-4xl mb-3 text-accent">ğŸ“</div><h3 class="text-lg font-semibold">é¸¡</h3></div>
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="dog"><div class="text-4xl mb-3 text-accent">ğŸ•</div><h3 class="text-lg font-semibold">ç‹—</h3></div>
                    <div class="ç”Ÿè‚–-card bg-dark/30 p-5 rounded-xl border border-accent/20 text-center cursor-pointer" data-animal="pig"><div class="text-4xl mb-3 text-accent">ğŸ–</div><h3 class="text-lg font-semibold">çŒª</h3></div>
                </div>
                <div id="zodiac-detail" class="mt-16 bg-dark/70 backdrop-blur-md rounded-xl p-8 border border-accent/30 hidden">
                    <div class="flex flex-col md:flex-row gap-8">
                        <div class="md:w-1/4 text-center">
                            <div class="text-8xl mb-4 text-accent" id="zodiac-icon"></div>
                            <h3 class="text-2xl font-bold mb-2" id="zodiac-name"></h3>
                        </div>
                        <div class="md:w-3/4">
                            <div id="zodiac-static-content">
                                <h4 class="text-xl font-semibold mb-3">æ€§æ ¼ç‰¹ç‚¹</h4>
                                <p class="text-light/80 mb-6" id="zodiac-character"></p>
                            </div>
                            <div class="mt-6 pt-6 border-t border-accent/20">
                                <h4 class="text-xl font-semibold mb-3">ç”Ÿè‚–å…³ç³»</h4>
                                <div id="zodiac-relations" class="text-sm space-y-2"></div>
                            </div>
                            <div class="mt-6 pt-6 border-t border-accent/20">
                                <div class="flex items-center gap-4 mb-4">
                                     <h4 class="text-xl font-semibold">çº³éŸ³äº”è¡Œè§£æ</h4>
                                     <select id="zodiac-year-selector" class="bg-primary/50 border border-accent/30 rounded-md px-2 py-1 text-light focus:outline-none"></select>
                                </div>
                                <p class="text-light/80 text-sm" id="zodiac-nayin-text"></p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 text-right">
                        <button id="close-zodiac" class="text-accent hover:underline">å…³é—­</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- å…³äºæˆ‘ä»¬ & é¡µè„š -->
        <section id="about" class="py-20 bg-primary/30">
             <div class="container mx-auto px-4 text-center">
                 <h2 class="text-4xl font-bold mb-4">å…³äºæˆ‘ä»¬</h2>
                 <p class="text-light/80 max-w-2xl mx-auto">æˆ‘ä»¬è‡´åŠ›äºé€šè¿‡å¤è€çš„æ™ºæ…§ï¼Œä¸ºæ‚¨æä¾›å¿ƒçµçš„æŒ‡å¼•ä¸æ…°è—‰ã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·è”ç³» <a href="mailto:contact@mysticdivination.com" class="text-accent hover:underline">contact@mysticdivination.com</a></p>
             </div>
        </section>
    </main>
    <footer class="bg-dark/80 py-8 border-t border-accent/20">
        <div class="container mx-auto px-4 text-center text-light/50 text-sm">
            <p>Â© 2025 ç¥ç§˜å åœ. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
        </div>
    </footer>

    <script>
        // --- é€šç”¨åŠŸèƒ½ ---
        const navbar = document.getElementById('navbar');
        window.addEventListener('scroll', () => {
            navbar.classList.toggle('bg-dark/90', window.scrollY > 50);
            navbar.classList.toggle('backdrop-blur-md', window.scrollY > 50);
        });
        const menuToggle = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        menuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
            menuToggle.innerHTML = mobileMenu.classList.contains('hidden') ? '<i class="fa fa-bars"></i>' : '<i class="fa fa-times"></i>';
        });
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                if (!mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.add('hidden');
                    menuToggle.innerHTML = '<i class="fa fa-bars"></i>';
                }
                const targetElement = document.querySelector(this.getAttribute('href'));
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // --- å¡”ç½—ç‰ŒåŠŸèƒ½ ---
        const drawTarotBtn = document.getElementById('draw-tarot');
        const tarotResults = document.getElementById('tarot-results');
        const spreadButtons = document.querySelectorAll('#tarot [data-spread]');
        const tarotQuestionInput = document.getElementById('tarot-question');
        const questionDisplay = document.getElementById('question-display');
        const questionText = document.getElementById('question-text');
        const shuffleContainer = document.getElementById('shuffle-animation-container');
        const aiInterpretationArea = document.getElementById('ai-interpretation-area');
        const aiInterpretBtn = document.getElementById('ai-interpret-btn');
        const aiResult = document.getElementById('ai-result');
        const aiResultText = document.getElementById('ai-result-text');
        let currentSpread = 'single';
        let drawnCardsData = [];

        const tarotCardData = [
            { name: 'æ„šè€…', img: 'https://upload.wikimedia.org/wikipedia/commons/9/90/RWS_Tarot_00_Fool.jpg', upright: { desc: 'å¼€å§‹, æ— é™å¯èƒ½, å¤©çœŸ', details: 'è±¡å¾å…¨æ–°çš„å¼€å§‹å’Œæ½œåŠ›ã€‚é¼“åŠ±ä½ å¸¦ç€å¼€æ”¾çš„å¿ƒæ€ï¼Œå‹‡æ•¢è¸å…¥æœªçŸ¥ã€‚æ˜¯æ—¶å€™æ”¾ä¸‹åŒ…è¢±ï¼Œè½»æ¾ä¸Šè·¯äº†ã€‚' }, reversed: { desc: 'é²è½, æ„šè ¢, é€ƒé¿', details: 'è¡¨ç¤ºä½ å¯èƒ½åœ¨é€ƒé¿è´£ä»»ï¼Œæˆ–å› è€ƒè™‘ä¸å‘¨è€Œåšå‡ºé²è½çš„å†³å®šã€‚æé†’ä½ åœ¨è¡ŒåŠ¨å‰è¦ä¸‰æ€ï¼Œé¿å…ä¸å¿…è¦çš„é£é™©ã€‚' } },
            { name: 'é­”æœ¯å¸ˆ', img: 'https://upload.wikimedia.org/wikipedia/commons/d/de/RWS_Tarot_01_Magician.jpg', upright: { desc: 'åˆ›é€ , æ˜¾åŒ–, èƒ½åŠ›', details: 'ä»£è¡¨ä½ æ‹¥æœ‰å°†æƒ³æ³•å˜ä¸ºç°å®çš„å¼ºå¤§èƒ½åŠ›ã€‚ä½ æ‰‹ä¸­å·²æ¡æœ‰æ‰€æœ‰å¿…éœ€çš„å·¥å…·ã€‚ç›¸ä¿¡è‡ªå·±ï¼Œä¸»åŠ¨å‡ºå‡»ã€‚' }, reversed: { desc: 'æ¬ºéª—, æ“çºµ, æ»¥ç”¨èƒ½åŠ›', details: 'å¯èƒ½è¡¨ç¤ºä½ çš„æ‰èƒ½è¢«è¯¯ç”¨æˆ–ç”¨äºæ¬ºéª—ã€‚è­¦æƒ•é‚£äº›çœ‹ä¼¼å¾ˆæœ‰èƒ½åŠ›ä½†æ„å›¾ä¸çº¯çš„äººï¼Œä¹Ÿéœ€åæ€è‡ªå·±æ˜¯å¦è¶³å¤ŸçœŸè¯šã€‚' } },
            { name: 'å¥³ç¥­å¸', img: 'https://upload.wikimedia.org/wikipedia/commons/8/88/RWS_Tarot_02_High_Priestess.jpg', upright: { desc: 'ç›´è§‰, æ™ºæ…§, ç¥ç§˜', details: 'é€šå¾€æ½œæ„è¯†å’Œå†…åœ¨æ™ºæ…§çš„å¤§é—¨ã€‚æé†’ä½ ç­”æ¡ˆæ— æ³•ä»å¤–ç•Œæ‰¾åˆ°ï¼Œéœ€è¦å‘å†…æ¢ç´¢ã€‚è¯·é™ä¸‹å¿ƒæ¥ï¼Œå€¾å¬ç›´è§‰ã€‚' }, reversed: { desc: 'ç§˜å¯†, ç›´è§‰å—é˜», è¿·èŒ«', details: 'è¡¨ç¤ºä½ å¯èƒ½å¿½ç•¥äº†å†…å¿ƒçš„å£°éŸ³ï¼Œæˆ–æœ‰äº›ç§˜å¯†è¢«éšè—ã€‚ä½ éœ€è¦æ›´å¤šåœ°å…³æ³¨è‡ªå·±çš„æ¢¦å¢ƒå’Œç›´è§‰ï¼Œä»¥æ‹¨å¼€è¿·é›¾ã€‚' } },
            { name: 'çš‡å', img: 'https://upload.wikimedia.org/wikipedia/commons/d/d2/RWS_Tarot_03_Empress.jpg', upright: { desc: 'ä¸°ç››, æ¯æ€§, åˆ›é€ åŠ›', details: 'ä¸°é¥¶ã€ç¾ä¸½ä¸åˆ›é€ åŠ›çš„åŒ–èº«ã€‚é¢„ç¤ºç€ä¸€ä¸ªå……æ»¡ç”Ÿäº§åŠ›å’Œæ”¶è·çš„æ—¶æœŸã€‚è¯·å°½æƒ…äº«å—å¹¶åˆ›é€ ç”Ÿæ´»ä¸­çš„ç¾å¥½ã€‚' }, reversed: { desc: 'åœæ», ä¾èµ–, å«‰å¦’', details: 'å¯èƒ½è¡¨ç¤ºåˆ›é€ åŠ›å—é˜»ï¼Œæˆ–åœ¨å…³ç³»ä¸­è¿‡åº¦ä¾èµ–ã€äº§ç”Ÿå«‰å¦’ã€‚éœ€è¦æ‰¾å›è‡ªå·±çš„ç‹¬ç«‹æ€§ï¼Œå¹¶å…³æ³¨è‡ªæˆ‘æ»‹å…»ã€‚' } },
            { name: 'çš‡å¸', img: 'https://upload.wikimedia.org/wikipedia/commons/c/c3/RWS_Tarot_04_Emperor.jpg', upright: { desc: 'æƒå¨, ç§©åº, é¢†å¯¼åŠ›', details: 'ä»£è¡¨ç»“æ„ã€çºªå¾‹å’Œé¢†å¯¼åŠ›ã€‚æé†’ä½ éœ€è¦ä¸ºç”Ÿæ´»å»ºç«‹ç§©åºå’Œè§„åˆ™ã€‚æ˜¯æ—¶å€™é‡‡å–å®é™…è¡ŒåŠ¨ï¼ŒæŒæ§å±€é¢ã€‚' }, reversed: { desc: 'ä¸“åˆ¶, æ­»æ¿, å¤±æ§', details: 'è¡¨ç¤ºè¿‡åº¦æ§åˆ¶ã€ç¼ºä¹å¼¹æ€§ï¼Œæˆ–è€…ç›¸åï¼Œå®Œå…¨å¤±å»äº†æ§åˆ¶ã€‚æé†’ä½ è¦åœ¨è§„åˆ™ä¸äººæ€§ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚' } },
            { name: 'æ•™çš‡', img: 'https://upload.wikimedia.org/wikipedia/commons/8/8d/RWS_Tarot_05_Hierophant.jpg', upright: { desc: 'ä¼ ç»Ÿ, æ•™è¯², ä¿¡ä»°', details: 'è±¡å¾ä¼ ç»Ÿã€åˆ¶åº¦å’Œç²¾ç¥æŒ‡å¯¼ã€‚å¯èƒ½æ„å‘³ç€ä½ éœ€è¦éµå¾ªæ—¢å®šè§„èŒƒï¼Œæˆ–ä»å¯¼å¸ˆå¤„å¯»æ±‚æ™ºæ…§ã€‚é€‚åˆå­¦ä¹ å’Œæ•™å¯¼ã€‚' }, reversed: { desc: 'æŒ‘æˆ˜ä¼ ç»Ÿ, æŸç¼š, è™šä¼ª', details: 'è¡¨ç¤ºä½ å¯èƒ½åœ¨æŒ‘æˆ˜ç°æœ‰çš„è§„åˆ™å’Œä¿¡å¿µï¼Œæˆ–æ„Ÿåˆ°è¢«ä¼ ç»ŸæŸç¼šã€‚é¼“åŠ±ä½ å¯»æ‰¾å±äºè‡ªå·±çš„ã€æ›´çœŸå®çš„ä¿¡ä»°ä½“ç³»ã€‚' } },
            { name: 'æ‹äºº', img: 'https://upload.wikimedia.org/wikipedia/commons/d/db/RWS_Tarot_06_Lovers.jpg', upright: { desc: 'é€‰æ‹©, ç»“åˆ, å’Œè°', details: 'æ ¸å¿ƒè®®é¢˜æ˜¯é€‰æ‹©ä¸ç»“ç›Ÿï¼Œä¸ä»…ä»…æ˜¯çˆ±æƒ…ï¼Œæ›´å…³ä¹ä»·å€¼è§‚çš„ç»Ÿä¸€ã€‚ä¸€ä¸ªé‡å¤§çš„å†³å®šæ‘†åœ¨é¢å‰ï¼Œè¯·è¿½éšæœ¬å¿ƒã€‚' }, reversed: { desc: 'é”™è¯¯é€‰æ‹©, å†²çª, å¤±è¡¡', details: 'å¯èƒ½è¡¨ç¤ºå…³ç³»ä¸­å‡ºç°ä¸å’Œè°ï¼Œæˆ–ä½ åšå‡ºäº†ä¸€ä¸ªä¸å†…å¿ƒç›¸æ‚–çš„é”™è¯¯é€‰æ‹©ã€‚éœ€è¦é‡æ–°å®¡è§†ä½ çš„ä»·å€¼è§‚å’Œå…³ç³»ã€‚' } },
            { name: 'æˆ˜è½¦', img: 'https://upload.wikimedia.org/wikipedia/commons/d/d6/RWS_Tarot_07_Chariot.jpg', upright: { desc: 'æ„å¿—, èƒœåˆ©, å†³å¿ƒ', details: 'é¢„ç¤ºç€èƒœåˆ©åœ¨æœ›ï¼Œä½†è¿™éœ€è¦å¼ºå¤§çš„æ„å¿—åŠ›å’Œå†³å¿ƒã€‚ä½ å¿…é¡»é©¾é©­ç”Ÿæ´»ä¸­çŸ›ç›¾çš„åŠ›é‡ï¼Œæœç€ç›®æ ‡å¥‹å‹‡å‰è¿›ã€‚' }, reversed: { desc: 'å¤±æ§, ç¼ºä¹æ–¹å‘, å†²çª', details: 'è¡¨ç¤ºä½ å¯èƒ½å¤±å»äº†å¯¹ç”Ÿæ´»æ–¹å‘çš„æ§åˆ¶ï¼Œè¡ŒåŠ¨ç¼ºä¹ç›®æ ‡ã€‚éœ€è¦é‡æ–°é›†ä¸­ä½ çš„æ„å¿—åŠ›ï¼Œæ˜ç¡®ä½ æƒ³è¦ä»€ä¹ˆã€‚' } },
            { name: 'åŠ›é‡', img: 'https://upload.wikimedia.org/wikipedia/commons/f/f5/RWS_Tarot_08_Strength.jpg', upright: { desc: 'å†…åœ¨åŠ›é‡, å‹‡æ°”, è€å¿ƒ', details: 'çœŸæ­£çš„åŠ›é‡æºäºå†…å¿ƒçš„å‹‡æ°”ã€è€å¿ƒå’Œæ…ˆæ‚²ã€‚ä½ æœ‰èƒ½åŠ›ç”¨æ¸©æŸ”å’Œåšæ¯…å»é©¯æœå†…å¿ƒçš„é‡å…½ï¼ˆææƒ§ã€æ¬²æœ›ï¼‰ã€‚' }, reversed: { desc: 'è½¯å¼±, ç¼ºä¹è‡ªä¿¡, å¤±æ§', details: 'å¯èƒ½è¡¨ç¤ºä½ æ„Ÿåˆ°å†…åœ¨åŠ›é‡ä¸è¶³ï¼Œç¼ºä¹è‡ªä¿¡ã€‚æé†’ä½ ä¸è¦å‹æŠ‘è‡ªå·±çš„æœ¬èƒ½ï¼Œè€Œæ˜¯è¦å»ç†è§£å’Œæ•´åˆå®ƒã€‚' } },
            { name: 'éšè€…', img: 'https://upload.wikimedia.org/wikipedia/commons/8/88/RWS_Tarot_09_Hermit.jpg', upright: { desc: 'å†…çœ, æ¢ç´¢, ç‹¬å¤„', details: 'é€‰æ‹©æš‚æ—¶è¿œç¦»å°˜åš£ï¼Œå‘å†…å¿ƒæ·±å¤„æ¢å¯»æ™ºæ…§ã€‚ç°åœ¨æ˜¯ç‹¬å¤„å’Œåæ€çš„æ—¶åˆ»ï¼Œä½ æ‰€è¿½å¯»çš„ç­”æ¡ˆå°±åœ¨è‡ªå·±å¿ƒä¸­ã€‚' }, reversed: { desc: 'å­¤ç«‹, ç–ç¦», è¿·å¤±', details: 'å¯èƒ½è¡¨ç¤ºä½ è¿‡äºå­¤ç«‹è‡ªå·±ï¼Œä¸å¤–ç•Œè„±èŠ‚ã€‚æé†’ä½ åœ¨ç‹¬å¤„å’Œä¸äººäº¤å¾€ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Œé¿å…é™·å…¥å­¤ç‹¬ã€‚' } },
            { name: 'å‘½è¿ä¹‹è½®', img: 'https://upload.wikimedia.org/wikipedia/commons/3/3c/RWS_Tarot_10_Wheel_of_Fortune.jpg', upright: { desc: 'è½¬æœº, å¾ªç¯, è¿æ°”', details: 'å‘½è¿ä¹‹è½®æ­£åœ¨è½¬åŠ¨ï¼Œç”Ÿæ´»ä¸­çš„å˜åŒ–ä¸å¯é¿å…ã€‚ä»£è¡¨ç€ç”Ÿå‘½çš„å¾ªç¯å’Œè½¬æŠ˜ç‚¹ã€‚è¯·é¡ºåº”æ½®æµï¼ŒæŠ“ä½æœºé‡ã€‚' }, reversed: { desc: 'å„è¿, åœæ», å˜æ•…', details: 'å¯èƒ½è¡¨ç¤ºæ—¶è¿ä¸æµï¼Œè®¡åˆ’é‡åˆ°æ„æƒ³ä¸åˆ°çš„é˜»ç¢ã€‚æé†’ä½ ç”Ÿæ´»æœ‰èµ·æœ‰è½ï¼Œè¿™æ˜¯æš‚æ—¶çš„ï¼Œä¿æŒè€å¿ƒã€‚' } },
            { name: 'æ­£ä¹‰', img: 'https://upload.wikimedia.org/wikipedia/commons/e/e0/RWS_Tarot_11_Justice.jpg', upright: { desc: 'å…¬å¹³, çœŸç›¸, å› æœ', details: 'å¼ºè°ƒé€»è¾‘ã€çœŸç†å’Œå› æœæ³•åˆ™ã€‚è¦æ±‚ä½ åšå‡ºæ¸…æ™°ã€å®¢è§‚å’Œå…¬å¹³çš„å†³å®šã€‚ä½ å°†ä¸ºè‡ªå·±çš„è¡Œä¸ºæ‰¿æ‹…ç›¸åº”ç»“æœã€‚' }, reversed: { desc: 'ä¸å…¬, åè§, é€ƒé¿è´£ä»»', details: 'å¯èƒ½è¡¨ç¤ºä½ æ­£ç»å†æˆ–é€ æˆä¸å…¬å¹³çš„çŠ¶å†µã€‚æé†’ä½ è¦è¯šå®é¢å¯¹çœŸç›¸ï¼Œä¸è¦é€ƒé¿è‡ªå·±åº”è´Ÿçš„è´£ä»»ã€‚' } },
            { name: 'å€’åŠäºº', img: 'https://upload.wikimedia.org/wikipedia/commons/2/2b/RWS_Tarot_12_Hanged_Man.jpg', upright: { desc: 'ç­‰å¾…, æ¢ä½æ€è€ƒ, ç‰ºç‰²', details: 'æé†’ä½ â€œæ— ä¸ºâ€æ‰æ˜¯æœ€å¤§çš„â€œæœ‰ä¸ºâ€ã€‚éœ€è¦æš‚åœè¡ŒåŠ¨ï¼Œä»å…¨æ–°çš„è§†è§’çœ‹å¾…é—®é¢˜ã€‚é€šè¿‡æš‚æ—¶çš„ç‰ºç‰²å°†è·å¾—æ›´æ·±åˆ»çš„æ´è§ã€‚' }, reversed: { desc: 'æ— è°“çš„ç‰ºç‰², åœæ»ä¸å‰', details: 'è¡¨ç¤ºä½ çš„ç­‰å¾…å’Œç‰ºç‰²å¯èƒ½æ˜¯å¾’åŠ³çš„ï¼Œæˆ–è€…ä½ åªæ˜¯åœ¨æ‹–å»¶ï¼Œä¸æ„¿åšå‡ºæ”¹å˜ã€‚æ˜¯æ—¶å€™é‡‡å–è¡ŒåŠ¨äº†ã€‚' } },
            { name: 'æ­»ç¥', img: 'https://upload.wikimedia.org/wikipedia/commons/d/d7/RWS_Tarot_13_Death.jpg', upright: { desc: 'ç»“æŸ, è½¬å˜, é‡ç”Ÿ', details: 'ä¸ä»£è¡¨çœŸæ­£çš„æ­»äº¡ï¼Œè€Œæ˜¯è±¡å¾ä¸€ä¸ªé‡è¦é˜¶æ®µçš„å½»åº•ç»“æŸã€‚ä¸ºäº†è¿æ¥æ–°ç”Ÿï¼Œä½ å¿…é¡»æ”¾ä¸‹æ—§äº‹ç‰©ã€‚è¿™æ˜¯ä¸€ä¸ªæ·±åˆ»è½¬å˜çš„æ—¶æœŸã€‚' }, reversed: { desc: 'æŠ—æ‹’æ”¹å˜, åœæ», ææƒ§', details: 'è¡¨ç¤ºä½ æ­£åœ¨æŠ—æ‹’ä¸€ä¸ªå¿…è¦çš„ç»“æŸï¼Œç´§æŠ“ç€è¿‡å»ä¸æ”¾ã€‚è¿™ç§æŠ—æ‹’åªä¼šå¸¦æ¥ç—›è‹¦ï¼Œä½ éœ€è¦å­¦ä¼šæ”¾æ‰‹ã€‚' } },
            { name: 'èŠ‚åˆ¶', img: 'https://upload.wikimedia.org/wikipedia/commons/f/f8/RWS_Tarot_14_Temperance.jpg', upright: { desc: 'å¹³è¡¡, è°ƒå’Œ, è€å¿ƒ', details: 'ä»£è¡¨å¹³è¡¡ã€å’Œè°ä¸è€å¿ƒã€‚æ•™å¯¼ä½ åœ¨ç”Ÿæ´»çš„å„ä¸ªæ–¹é¢å¯»æ‰¾ä¸­åº¸ä¹‹é“ï¼Œå°†å¯¹ç«‹çš„å…ƒç´ å®Œç¾èåˆã€‚' }, reversed: { desc: 'å¤±è¡¡, æç«¯, å†²çª', details: 'è¡¨ç¤ºä½ çš„ç”Ÿæ´»å¯èƒ½å¤±å»äº†å¹³è¡¡ï¼Œèµ°å‘äº†æŸä¸ªæç«¯ã€‚éœ€è¦é‡æ–°å®¡è§†ä½ çš„è¡Œä¸ºï¼Œå¯»æ‰¾å’Œè°ä¸èŠ‚åˆ¶ã€‚' } },
            { name: 'æ¶é­”', img: 'https://upload.wikimedia.org/wikipedia/commons/5/55/RWS_Tarot_15_Devil.jpg', upright: { desc: 'æŸç¼š, è¯±æƒ‘, ç‰©è´¨ä¸»ä¹‰', details: 'æ­ç¤ºä½ å¯èƒ½è¢«è´Ÿé¢æ¨¡å¼ã€ææƒ§æˆ–ç‰©è´¨æ¬²æœ›æ‰€æŸç¼šã€‚ç„¶è€Œï¼Œé”ä½ä½ çš„é“¾æ¡æ˜¯æ¾åŠ¨çš„ï¼Œä½ æœ‰åŠ›é‡æŒ£è„±ã€‚' }, reversed: { desc: 'æŒ£è„±, é‡Šæ”¾, è§‰é†’', details: 'ä¸€ä¸ªç§¯æçš„ä¿¡å·ï¼Œè¡¨ç¤ºä½ æ­£åœ¨æ„è¯†åˆ°å¹¶å¼€å§‹æŒ£è„±ä¸€ç›´æŸç¼šä½ çš„æ·é”ã€‚ä½ æ­£åœ¨èµ°å‘è‡ªç”±ã€‚' } },
            { name: 'å¡”', img: 'https://upload.wikimedia.org/wikipedia/commons/5/53/RWS_Tarot_16_Tower.jpg', upright: { desc: 'éª¤å˜, è§‰é†’, æ­ç¤ºçœŸç›¸', details: 'ä»£è¡¨çªå¦‚å…¶æ¥çš„ã€é¢ è¦†æ€§çš„å˜åŒ–ã€‚ä¸€ä¸ªåŸºäºè™šå‡ä¿¡å¿µå»ºç«‹çš„ç»“æ„æ­£åœ¨å´©å¡Œã€‚è™½ç„¶å……æ»¡å†²å‡»ï¼Œä½†å®ƒæœ€ç»ˆæ˜¯ä¸ºäº†æ­ç¤ºçœŸç›¸ã€‚' }, reversed: { desc: 'é€ƒé¿ç¾éš¾, ææƒ§æ”¹å˜', details: 'è¡¨ç¤ºä½ å¯èƒ½æ­£åœ¨é¢„æ„Ÿä¸€ä¸ªå±æœºçš„åˆ°æ¥å¹¶è¯•å›¾é¿å…å®ƒã€‚ç„¶è€Œï¼ŒæŠ—æ‹’å¿…è¦çš„æ”¹å˜å¯èƒ½æ¯”æ”¹å˜æœ¬èº«æ›´å…·ç ´åæ€§ã€‚' } },
            { name: 'æ˜Ÿæ˜Ÿ', img: 'https://upload.wikimedia.org/wikipedia/commons/d/db/RWS_Tarot_17_Star.jpg', upright: { desc: 'å¸Œæœ›, æ²»æ„ˆ, ä¿¡å¿µ', details: 'åœ¨ç»å†äº†å›°éš¾ä¹‹åï¼Œæ˜Ÿæ˜Ÿå¸¦æ¥äº†å¸Œæœ›ã€æ²»æ„ˆå’Œçµæ„Ÿã€‚å¯¹æœªæ¥ä¿æŒä¿¡å¿µå’Œä¹è§‚ã€‚æ˜¯ç–—æ„ˆåˆ›ä¼¤ã€è¿½éšå®‡å®™æŒ‡å¼•çš„æœ€ä½³æ—¶æœºã€‚' }, reversed: { desc: 'å¤±æœ›, ç»æœ›, å¤±å»ä¿¡å¿µ', details: 'å¯èƒ½è¡¨ç¤ºä½ æš‚æ—¶å¤±å»äº†å¸Œæœ›å’Œæ–¹å‘ã€‚æé†’ä½ å³ä½¿åœ¨æœ€é»‘æš—çš„æ—¶å€™ï¼Œå¸Œæœ›ä¹‹æ˜Ÿä¾ç„¶å­˜åœ¨ï¼Œåªæ˜¯éœ€è¦ä½ é‡æ–°å»å‘ç°ã€‚' } },
            { name: 'æœˆäº®', img: 'https://upload.wikimedia.org/wikipedia/commons/7/7f/RWS_Tarot_18_Moon.jpg', upright: { desc: 'ä¸å®‰, å¹»è±¡, ç›´è§‰', details: 'ç¬¼ç½©ç€ä¸€å±‚ç¥ç§˜å’Œä¸ç¡®å®šæ€§ã€‚äº‹ç‰©å¯èƒ½ä¸åƒè¡¨é¢çœ‹èµ·æ¥é‚£æ ·ã€‚è­¦æƒ•å¹»è§‰å’Œææƒ§ï¼Œä½†æ›´è¦ä¿¡ä»»ä½ çš„ç›´è§‰ã€‚' }, reversed: { desc: 'è¿·é›¾æ•£å», çœŸç›¸å¤§ç™½', details: 'è¡¨ç¤ºå›°æƒ‘å’Œä¸å®‰æ­£åœ¨æ¶ˆæ•£ï¼Œä½ å¼€å§‹çœ‹æ¸…äº‹ç‰©çš„çœŸç›¸ã€‚ä¸€ç›´å›°æ‰°ä½ çš„é—®é¢˜å°†å¾—åˆ°è§£ç­”ã€‚' } },
            { name: 'å¤ªé˜³', img: 'https://upload.wikimedia.org/wikipedia/commons/1/17/RWS_Tarot_19_Sun.jpg', upright: { desc: 'æˆåŠŸ, å–œæ‚¦, æ´»åŠ›', details: 'å¡”ç½—ç‰Œä¸­æœ€ç§¯æçš„ç‰Œä¹‹ä¸€ï¼Œä»£è¡¨æˆåŠŸã€å–œæ‚¦å’Œæ¸…æ™°ã€‚å°½æƒ…äº«å—ç”Ÿæ´»ã€åº†ç¥ä½ çš„æˆå°±ï¼Œæœªæ¥ä¸€ç‰‡å…‰æ˜ã€‚' }, reversed: { desc: 'çŸ­æš‚çš„æˆåŠŸ, ç¼ºä¹çƒ­æƒ…', details: 'å¯èƒ½è¡¨ç¤ºä½ è™½ç„¶å–å¾—äº†æˆåŠŸï¼Œä½†å†…å¿ƒå¹¶æœªæ„Ÿåˆ°çœŸæ­£çš„å¿«ä¹ï¼Œæˆ–è€…è¿™ä»½æˆåŠŸæ˜¯çŸ­æš‚çš„ã€‚éœ€è¦æ‰¾å›å†…å¿ƒçš„çƒ­æƒ…ã€‚' } },
            { name: 'å®¡åˆ¤', img: 'https://upload.wikimedia.org/wikipedia/commons/d/dd/RWS_Tarot_20_Judgement.jpg', upright: { desc: 'åæ€, å¤è‹, å†³æ–­', details: 'å¹å“äº†è§‰é†’çš„å·è§’ã€‚è¿™æ˜¯ä¸€ä¸ªæ·±åˆ»è‡ªæˆ‘åæ€ã€è¯„ä¼°è¿‡å»çš„æ—¶åˆ»ã€‚æ˜¯æ—¶å€™åšå‡ºä¸€ä¸ªæ”¹å˜äººç”Ÿçš„é‡å¤§å†³å®šäº†ã€‚' }, reversed: { desc: 'è‡ªæˆ‘æ€€ç–‘, é€ƒé¿å®¡è§†', details: 'è¡¨ç¤ºä½ å¯èƒ½åœ¨é€ƒé¿å¯¹è‡ªå·±çš„è¯„åˆ¤ï¼Œå¯¹è‡ªå·±è¿‡äºè‹›åˆ»ï¼Œæˆ–å®³æ€•åšå‡ºå†³å®šã€‚ä½ éœ€è¦å­¦ä¼šè‡ªæˆ‘å®½æ•å’Œæ¥çº³ã€‚' } },
            { name: 'ä¸–ç•Œ', img: 'https://upload.wikimedia.org/wikipedia/commons/f/ff/RWS_Tarot_21_World.jpg', upright: { desc: 'åœ†æ»¡, å®Œæˆ, æˆå°±', details: 'ä»£è¡¨ä¸€ä¸ªé‡è¦æ—…ç¨‹çš„æˆåŠŸå®Œæˆå’Œåœ†æ»¡ã€‚ä½ å·²è¾¾æˆäº†ç›®æ ‡ï¼Œç”Ÿæ´»å’Œè°ã€‚äº«å—ä½ çš„æˆå°±æ„Ÿï¼Œä¸€ä¸ªæ–°çš„å‘¨æœŸå³å°†å¼€å§‹ã€‚' }, reversed: { desc: 'æœªå®Œæˆ, åœæ», èµ°æ·å¾„', details: 'è¡¨ç¤ºæŸä¸ªé¡¹ç›®æˆ–äººç”Ÿé˜¶æ®µå°šæœªçœŸæ­£å®Œæˆï¼Œä½ å¯èƒ½åœ¨å¯»æ±‚æ·å¾„è€Œå¿½ç•¥äº†é‡è¦çš„æ­¥éª¤ã€‚éœ€è¦æœ‰å§‹æœ‰ç»ˆã€‚' } }
        ];

        spreadButtons.forEach(button => {
            button.addEventListener('click', () => {
                spreadButtons.forEach(btn => { btn.classList.remove('bg-primary'); btn.classList.add('bg-dark/70', 'hover:bg-primary/70'); });
                button.classList.add('bg-primary');
                button.classList.remove('bg-dark/70', 'hover:bg-primary/70');
                currentSpread = button.dataset.spread;
            });
        });

        drawTarotBtn.addEventListener('click', () => {
            shuffleContainer.classList.remove('hidden');
            tarotResults.innerHTML = '';
            questionDisplay.classList.add('hidden');
            aiInterpretationArea.classList.add('hidden');
            aiResult.classList.add('hidden');
            drawnCardsData = [];

            setTimeout(() => {
                shuffleContainer.classList.add('hidden');
                const question = tarotQuestionInput.value.trim();
                if (question) {
                    questionText.textContent = `â€œ${question}â€`;
                    questionDisplay.classList.remove('hidden');
                }
                tarotResults.className = currentSpread === 'single'
                    ? 'flex justify-center items-center mt-12'
                    : 'grid grid-cols-1 md:grid-cols-3 gap-8 justify-items-center mt-12';

                setTimeout(() => {
                    tarotResults.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);

                let cardCount = currentSpread === 'three' ? 3 : 1;
                const shuffledCards = [...tarotCardData].sort(() => 0.5 - Math.random());
                
                for (let i = 0; i < cardCount; i++) {
                    const cardData = shuffledCards[i];
                    const isReversed = Math.random() < 0.5;
                    const cardInfo = isReversed ? cardData.reversed : cardData.upright;
                    
                    drawnCardsData.push({ name: cardData.name, orientation: isReversed ? 'é€†ä½' : 'æ­£ä½', interpretation: cardInfo.details, keywords: cardInfo.desc });

                    const cardElement = document.createElement('div');
                    cardElement.className = 'tarot-card-container w-56 h-96 cursor-pointer'; 
                    cardElement.innerHTML = `
                        <div class="tarot-card">
                            <div class="tarot-card-face bg-light text-dark flex flex-col">
                                <div class="flex-grow w-full relative bg-dark/20 flex items-center justify-center">
                                    <i class="fa fa-spinner fa-spin text-light/50 text-2xl absolute"></i>
                                    <img src="${cardData.img}" alt="${cardData.name}" class="w-full h-full object-cover opacity-0 transition-opacity duration-500 ${isReversed ? 'is-reversed-img' : ''}">
                                </div>
                                <div class="p-4 text-center">
                                    <h3 class="font-serif font-bold text-primary text-xl">${cardData.name} <span class="text-sm font-sans font-normal ${isReversed ? 'text-red-500' : 'text-secondary'}">[${isReversed ? 'é€†ä½' : 'æ­£ä½'}]</span></h3>
                                    <p class="text-xs text-gray-600 mt-1">${cardInfo.desc}</p>
                                </div>
                            </div>
                            <div class="tarot-card-face tarot-card-details bg-gradient-to-br from-primary to-dark text-light p-6 flex flex-col">
                                <h3 class="font-serif font-bold text-accent text-2xl mb-3">${cardData.name} <span class="text-lg">[${isReversed ? 'é€†ä½' : 'æ­£ä½'}]</span></h3>
                                <hr class="border-accent/30 mb-4">
                                <p class="text-sm flex-grow overflow-y-auto">${cardInfo.details}</p>
                            </div>
                        </div>
                    `;
                    tarotResults.appendChild(cardElement);
                    const img = cardElement.querySelector('img');
                    const spinner = cardElement.querySelector('.fa-spinner');
                    img.onload = () => { spinner.style.display = 'none'; img.classList.remove('opacity-0'); };
                    img.onerror = () => { spinner.className = 'fa fa-exclamation-triangle text-red-500'; }; 
                    cardElement.addEventListener('click', () => { cardElement.querySelector('.tarot-card').classList.toggle('flipped'); });
                }
                aiInterpretationArea.classList.remove('hidden');
            }, 1500);
        });

        aiInterpretBtn.addEventListener('click', () => {
            const btn = aiInterpretBtn;
            btn.disabled = true;
            btn.innerHTML = `<i class="fa fa-spinner fa-spin mr-2"></i>AI æ­£åœ¨è§£è¯»ä¸­...`;
            aiResult.classList.add('hidden');

            setTimeout(() => {
                const question = tarotQuestionInput.value.trim() || "æˆ‘å½“ä¸‹çš„æ•´ä½“çŠ¶å†µ";
                let interpretation = `**AIç»¼åˆè§£è¯»**\n\né’ˆå¯¹æ‚¨çš„é—®é¢˜ï¼šâ€œ**${question}**â€ï¼Œå¡”ç½—ç‰Œç»™å‡ºäº†å¦‚ä¸‹æŒ‡å¼•ï¼š\n\n`;
                
                if (drawnCardsData.length === 1) {
                    const card = drawnCardsData[0];
                    interpretation += `æ‚¨æŠ½åˆ°çš„æ ¸å¿ƒç‰Œæ˜¯ã€**${card.name} - ${card.orientation}**ã€‘ï¼Œå…¶å…³é”®è¯æ˜¯â€œ**${card.keywords}**â€ã€‚\nè¿™æ­ç¤ºäº†æ‚¨å½“å‰çŠ¶å†µçš„æ ¸å¿ƒèƒ½é‡ï¼š${card.interpretation}\n\n**AIå»ºè®®**ï¼šåŸºäºæ­¤ç‰Œæ„ï¼Œå»ºè®®æ‚¨æ¥ä¸‹æ¥é‡ç‚¹å…³æ³¨ä¸â€œ${card.keywords.split(', ')[0]}â€ç›¸å…³çš„é¢†åŸŸã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ˜¯ã€æ„šè€…ã€‘ï¼Œå°±åº”è¯¥å‹‡æ•¢å°è¯•æ–°äº‹ç‰©ï¼›å¦‚æœæ˜¯ã€éšè€… - é€†ä½ã€‘ï¼Œåˆ™éœ€è¦æ€è€ƒæ˜¯å¦è¿‡äºå­¤ç«‹è‡ªå·±ã€‚è¯·å°†è¿™ä¸ªæ ¸å¿ƒæŒ‡å¼•ä¸æ‚¨çš„å®é™…ç”Ÿæ´»ç›¸ç»“åˆï¼Œæ‚¨ä¼šæ‰¾åˆ°ç­”æ¡ˆã€‚`;
                } else {
                    const past = drawnCardsData[0];
                    const present = drawnCardsData[1];
                    const future = drawnCardsData[2];
                    interpretation += `1.  **è¿‡å» (æ ¹æº)**ï¼šã€**${past.name} - ${past.orientation}**ã€‘\n    è¿™ä»£è¡¨äº†æ‚¨é—®é¢˜çš„æ ¹æºæˆ–è¿‡å»çš„çŠ¶å†µã€‚å…³é”®è¯â€œ**${past.keywords}**â€è¡¨æ˜ï¼Œ${past.interpretation}\n\n`;
                    interpretation += `2.  **ç°åœ¨ (æ ¸å¿ƒ)**ï¼šã€**${present.name} - ${present.orientation}**ã€‘\n    è¿™æ˜¯æ‚¨ç›®å‰é¢ä¸´çš„æ ¸å¿ƒçŠ¶å†µã€‚å…³é”®è¯â€œ**${present.keywords}**â€æ­ç¤ºäº†ï¼Œ${present.interpretation}\n\n`;
                    interpretation += `3.  **æœªæ¥ (æŒ‡å¼•)**ï¼šã€**${future.name} - ${future.orientation}**ã€‘\n    è¿™æŒ‡æ˜äº†é—®é¢˜å¯èƒ½çš„å‘å±•æ–¹å‘ã€‚å…³é”®è¯â€œ**${future.keywords}**â€é¢„ç¤ºç€ï¼Œ${future.interpretation}\n\n`;
                    interpretation += `**AIç»¼åˆå»ºè®®**ï¼šæ•´ä½“æ¥çœ‹ï¼Œç‰Œé˜µæ˜¾ç¤ºæ‚¨ä»ä¸€ä¸ªâ€œ${past.keywords.split(', ')[0]}â€çš„çŠ¶æ€ï¼Œèµ°åˆ°äº†å½“å‰â€œ${present.keywords.split(', ')[0]}â€çš„æ ¸å¿ƒæŒ‘æˆ˜ä¸­ã€‚ä¸ºäº†èµ°å‘ä¸€ä¸ªè±¡å¾ç€â€œ${future.keywords.split(', ')[0]}â€çš„æœªæ¥ï¼Œæ‚¨å½“å‰æœ€éœ€è¦åšçš„ï¼Œæ˜¯å¤„ç†å¥½ã€**${present.name}**ã€‘è¿™å¼ ç‰Œæ‰€æ­ç¤ºçš„è¯¾é¢˜ã€‚`;
                }
                
                aiResultText.textContent = interpretation;
                aiResult.classList.remove('hidden');
                aiResult.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                btn.disabled = false;
                btn.innerHTML = `<i class="fa fa-magic mr-2"></i>AI ç»“åˆé—®é¢˜è§£è¯»`;
            }, 2500); // æ¨¡æ‹ŸAIæ€è€ƒæ—¶é—´
        });

        // --- æ˜Ÿåº§è¿åŠ¿åŠŸèƒ½ ---
        const horoscopeCards = document.querySelectorAll('.horoscope-card');
        const horoscopeDetail = document.getElementById('horoscope-detail');
        const closeHoroscopeBtn = document.getElementById('close-horoscope');
        const horoscopeTitle = document.getElementById('horoscope-title');
        const horoscopeIndexes = document.getElementById('horoscope-indexes');
        const horoscopeContent = document.getElementById('horoscope-content');
        const horoscopeGranularitySelector = document.getElementById('horoscope-granularity-selector');
        const horoscopeData = {
            aries: { name: 'ç™½ç¾Šåº§' }, taurus: { name: 'é‡‘ç‰›åº§' }, gemini: { name: 'åŒå­åº§' }, cancer: { name: 'å·¨èŸ¹åº§' }, leo: { name: 'ç‹®å­åº§' }, virgo: { name: 'å¤„å¥³åº§' }, libra: { name: 'å¤©ç§¤åº§' }, scorpio: { name: 'å¤©èåº§' }, sagittarius: { name: 'å°„æ‰‹åº§' }, capricorn: { name: 'æ‘©ç¾¯åº§' }, aquarius: { name: 'æ°´ç“¶åº§' }, pisces: { name: 'åŒé±¼åº§' }
        };
        function getHoroscopeFortune(sign, granularity) {
            const seed = new Date().getDate() + sign.split('').reduce((a, b) => a + b.charCodeAt(0), 0);
            const fortunes = {
                day: ["ä»Šå¤©æ´»åŠ›æ»¡æ»¡ï¼Œé€‚åˆå¼€å¯æ–°é¡¹ç›®ã€‚", "æƒ…ç»ªæœ‰ç‚¹ä½è½ï¼Œå¤šè·Ÿæœ‹å‹èŠèŠã€‚", "è´¢è¿ä¸é”™ï¼Œå¯èƒ½ä¼šæœ‰æ„å¤–ä¹‹å–œã€‚", "æ³¨æ„æ²Ÿé€šï¼Œé¿å…ä¸äººå‘ç”Ÿå£è§’ã€‚"],
                week: ["æœ¬å‘¨äº‹ä¸šè¿å¼ºåŠ²ï¼ŒæŠ“ä½æœºä¼šè¡¨ç°è‡ªå·±ã€‚", "æ„Ÿæƒ…ç”Ÿæ´»ä¸°å¯Œå¤šå½©ï¼Œå•èº«è€…æ¡ƒèŠ±æ—ºã€‚", "æ³¨æ„åŠ³é€¸ç»“åˆï¼Œèº«ä½“æ˜¯é©å‘½çš„æœ¬é’±ã€‚", "å¯èƒ½ä¼šæœ‰äº›å°ç ´è´¢ï¼Œæ³¨æ„ç†è´¢ã€‚"],
                month: ["æœ¬æœˆæ˜¯å­¦ä¹ å’Œæˆé•¿çš„å¥½æ—¶æœºï¼Œé€‚åˆè¿›ä¿®ã€‚", "äººé™…å…³ç³»æ˜¯æœ¬æœˆçš„é‡ç‚¹ï¼Œå¤šå‚åŠ ç¤¾äº¤æ´»åŠ¨ã€‚", "è´¢åŠ¡çŠ¶å†µç¨³å®šï¼Œé€‚åˆåšé•¿æœŸè§„åˆ’ã€‚", "å®¶åº­æ–¹é¢éœ€è¦ä½ æŠ•å…¥æ›´å¤šç²¾åŠ›ã€‚"],
                year: ["ä»Šå¹´æ˜¯å……æ»¡æœºé‡çš„ä¸€å¹´ï¼Œäº‹ä¸šå°†æœ‰é‡å¤§çªç ´ã€‚", "æ„Ÿæƒ…ä¸Šå°†è¿æ¥æ–°çš„é˜¶æ®µï¼Œå…³ç³»æ›´åŠ ç¨³å›ºã€‚", "éœ€è¦å…³æ³¨å¥åº·ï¼Œå…»æˆè‰¯å¥½ç”Ÿæ´»ä¹ æƒ¯ã€‚", "è´¢åŠ¡ä¸ŠæŒ‘æˆ˜ä¸æœºé‡å¹¶å­˜ï¼Œéœ€è°¨æ…æŠ•èµ„ã€‚"]
            };
            return {
                text: fortunes[granularity][seed % fortunes[granularity].length],
                love: (seed * 2 % 3) + 3,
                career: (seed * 3 % 3) + 3,
                wealth: (seed * 4 % 3) + 3
            };
        }
        function renderStars(count) { let s = ''; for(let i=0;i<5;i++){s+=`<i class="fa fa-${i<count?'star':'star-o'}"></i>`;} return s; }
        function updateHoroscopeView(sign, granularity = 'day') {
            const data = horoscopeData[sign];
            const fortune = getHoroscopeFortune(sign, granularity);
            const titleMap = { day: 'ä»Šæ—¥', week: 'æœ¬å‘¨', month: 'æœ¬æœˆ', year: 'æœ¬å¹´' };
            horoscopeTitle.textContent = `${data.name}${titleMap[granularity]}è¿åŠ¿`;
            horoscopeContent.textContent = fortune.text;
            horoscopeIndexes.innerHTML = `<div class="bg-primary/20 p-4 rounded-lg"><h4 class="font-semibold mb-2">çˆ±æƒ…æŒ‡æ•°</h4><div class="flex text-accent mb-1">${renderStars(fortune.love)}</div></div><div class="bg-primary/20 p-4 rounded-lg"><h4 class="font-semibold mb-2">äº‹ä¸šæŒ‡æ•°</h4><div class="flex text-accent mb-1">${renderStars(fortune.career)}</div></div><div class="bg-primary/20 p-4 rounded-lg"><h4 class="font-semibold mb-2">è´¢è¿æŒ‡æ•°</h4><div class="flex text-accent mb-1">${renderStars(fortune.wealth)}</div></div>`;
            horoscopeDetail.dataset.currentSign = sign;
            horoscopeGranularitySelector.querySelectorAll('button').forEach(btn => {
                btn.classList.toggle('bg-primary', btn.dataset.granularity === granularity);
                btn.classList.toggle('bg-dark/70', btn.dataset.granularity !== granularity);
            });
        }
        horoscopeCards.forEach(card => card.addEventListener('click', () => {
            const sign = card.dataset.sign;
            updateHoroscopeView(sign);
            horoscopeDetail.classList.remove('hidden');
            horoscopeDetail.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }));
        horoscopeGranularitySelector.querySelectorAll('button').forEach(btn => btn.addEventListener('click', () => {
            const sign = horoscopeDetail.dataset.currentSign;
            if(sign) updateHoroscopeView(sign, btn.dataset.granularity);
        }));
        closeHoroscopeBtn.addEventListener('click', () => horoscopeDetail.classList.add('hidden'));

        // --- ç”Ÿè‚–åŠŸèƒ½ ---
        const zodiacCards = document.querySelectorAll('.ç”Ÿè‚–-card');
        const zodiacDetail = document.getElementById('zodiac-detail');
        const closeZodiacBtn = document.getElementById('close-zodiac');
        const zodiacYearSelector = document.getElementById('zodiac-year-selector');
        const zodiacStaticData = {
            rat: { icon: 'ğŸ€', name: 'é¼ ', character: 'èªæ˜æœºæ™ºï¼Œé€‚åº”åŠ›å¼ºï¼Œä¹è§‚å¼€æœ—ï¼Œå–„äºäº¤é™…ã€‚', relations: { sanhe: 'é¾™, çŒ´', liuhe: 'ç‰›', chong: 'é©¬', hai: 'ç¾Š' } },
            ox: { icon: 'ğŸ‚', name: 'ç‰›', character: 'è¸å®ç¨³é‡ï¼Œæœ‰è€å¿ƒå’Œæ¯…åŠ›ï¼Œè¯šå®å®ˆä¿¡ã€‚', relations: { sanhe: 'è›‡, é¸¡', liuhe: 'é¼ ', chong: 'ç¾Š', hai: 'é©¬' } },
            tiger: { icon: 'ğŸ…', name: 'è™', character: 'å‹‡æ•¢è‡ªä¿¡ï¼Œå¯Œæœ‰é¢†å¯¼åŠ›ï¼Œçƒ­æƒ…å¼€æœ—ï¼Œå–œæ¬¢æŒ‘æˆ˜ã€‚', relations: { sanhe: 'é©¬, ç‹—', liuhe: 'çŒª', chong: 'çŒ´', hai: 'è›‡' } },
            rabbit: { icon: 'ğŸ‡', name: 'å…”', character: 'æ¸©å’Œå–„è‰¯ï¼Œä¹è§‚å¼€æœ—ï¼Œå¾…äººå‹å–„ï¼Œå–œæ¬¢å’Œå¹³ã€‚', relations: { sanhe: 'çŒª, ç¾Š', liuhe: 'ç‹—', chong: 'é¸¡', hai: 'é¾™' } },
            dragon: { icon: 'ğŸ‰', name: 'é¾™', character: 'è‡ªä¿¡æ»¡æ»¡ï¼Œå¯Œæœ‰åˆ›é€ åŠ›ï¼Œæœ‰è¿œå¤§ç†æƒ³å’ŒæŠ±è´Ÿã€‚', relations: { sanhe: 'é¼ , çŒ´', liuhe: 'é¸¡', chong: 'ç‹—', hai: 'å…”' } },
            snake: { icon: 'ğŸ', name: 'è›‡', character: 'èªæ˜æœºæ™ºï¼Œå¯Œæœ‰æ´å¯ŸåŠ›ï¼Œæœ‰ç¥ç§˜æ°”è´¨ã€‚', relations: { sanhe: 'é¸¡, ç‰›', liuhe: 'çŒ´', chong: 'çŒª', hai: 'è™' } },
            horse: { icon: 'ğŸ', name: 'é©¬', character: 'æ´»åŠ›å……æ²›ï¼Œçƒ­æƒ…å¼€æœ—ï¼Œå–œæ¬¢è‡ªç”±å’Œå†’é™©ã€‚', relations: { sanhe: 'è™, ç‹—', liuhe: 'ç¾Š', chong: 'é¼ ', hai: 'ç‰›' } },
            sheep: { icon: 'ğŸ‘', name: 'ç¾Š', character: 'æ¸©å’Œå–„è‰¯ï¼Œå¯Œæœ‰æƒ³è±¡åŠ›ï¼Œå–œæ¬¢è‰ºæœ¯å’Œæ–‡å­¦ã€‚', relations: { sanhe: 'çŒª, å…”', liuhe: 'é©¬', chong: 'ç‰›', hai: 'é¼ ' } },
            monkey: { icon: 'ğŸ’', name: 'çŒ´', character: 'èªæ˜æœºæ™ºï¼Œæ´»æ³¼å¥½åŠ¨ï¼Œå–„äºæ¨¡ä»¿å’Œå­¦ä¹ ã€‚', relations: { sanhe: 'é¼ , é¾™', liuhe: 'è›‡', chong: 'è™', hai: 'çŒª' } },
            rooster: { icon: 'ğŸ“', name: 'é¸¡', character: 'è‡ªä¿¡æ»¡æ»¡ï¼Œè¿½æ±‚å®Œç¾ï¼Œæœ‰å¼ºçƒˆçš„è´£ä»»å¿ƒã€‚', relations: { sanhe: 'è›‡, ç‰›', liuhe: 'é¾™', chong: 'å…”', hai: 'ç‹—' } },
            dog: { icon: 'ğŸ•', name: 'ç‹—', character: 'å¿ è¯šæ­£ç›´ï¼Œè¯šå®å®ˆä¿¡ï¼Œå¾…äººçœŸè¯šã€‚', relations: { sanhe: 'è™, é©¬', liuhe: 'å…”', chong: 'é¾™', hai: 'é¸¡' } },
            pig: { icon: 'ğŸ–', name: 'çŒª', character: 'æ¸©å’Œå–„è‰¯ï¼Œä¹è§‚å¼€æœ—ï¼Œå¾…äººå‹å–„ï¼Œä¸å–œäº‰æ–—ã€‚', relations: { sanhe: 'å…”, ç¾Š', liuhe: 'è™', chong: 'è›‡', hai: 'çŒ´' } }
        };
        const naYinData = { 'ç”²å­ä¹™ä¸‘': 'æµ·ä¸­é‡‘', 'ä¸™å¯…ä¸å¯': 'ç‚‰ä¸­ç«', 'æˆŠè¾°å·±å·³': 'å¤§æ—æœ¨', 'åºšåˆè¾›æœª': 'è·¯æ—åœŸ', 'å£¬ç”³ç™¸é…‰': 'å‰‘é”‹é‡‘', 'ç”²æˆŒä¹™äº¥': 'å±±å¤´ç«', 'ä¸™å­ä¸ä¸‘': 'æ¶§ä¸‹æ°´', 'æˆŠå¯…å·±å¯': 'åŸå¤´åœŸ', 'åºšè¾°è¾›å·³': 'ç™½èœ¡é‡‘', 'å£¬åˆç™¸æœª': 'æ¨æŸ³æœ¨', 'ç”²ç”³ä¹™é…‰': 'æ³‰ä¸­æ°´', 'ä¸™æˆŒä¸äº¥': 'å±‹ä¸ŠåœŸ', 'æˆŠå­å·±ä¸‘': 'éœ¹é›³ç«', 'åºšå¯…è¾›å¯': 'æ¾æŸæœ¨', 'å£¬è¾°ç™¸å·³': 'é•¿æµæ°´', 'ç”²åˆä¹™æœª': 'æ²™ä¸­é‡‘', 'ä¸™ç”³ä¸é…‰': 'å±±ä¸‹ç«', 'æˆŠæˆŒå·±äº¥': 'å¹³åœ°æœ¨', 'åºšå­è¾›ä¸‘': 'å£ä¸ŠåœŸ', 'å£¬å¯…ç™¸å¯': 'é‡‘ç®”é‡‘', 'ç”²è¾°ä¹™å·³': 'è¦†ç¯ç«', 'ä¸™åˆä¸æœª': 'å¤©æ²³æ°´', 'æˆŠç”³å·±é…‰': 'å¤§é©¿åœŸ', 'åºšæˆŒè¾›äº¥': 'é’—é’é‡‘', 'å£¬å­ç™¸ä¸‘': 'æ¡‘æŸ˜æœ¨', 'ç”²å¯…ä¹™å¯': 'å¤§æºªæ°´', 'ä¸™è¾°ä¸å·³': 'æ²™ä¸­åœŸ', 'æˆŠåˆå·±æœª': 'å¤©ä¸Šç«', 'åºšç”³è¾›é…‰': 'çŸ³æ¦´æœ¨', 'å£¬æˆŒç™¸äº¥': 'å¤§æµ·æ°´' };
        const heavenlyStems = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];
        const earthlyBranches = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥'];
        function populateYearSelector(selectorId, range, reverse = false) {
            const selector = document.getElementById(selectorId);
            if (!selector) return;
            selector.innerHTML = '';
            const currentYear = new Date().getFullYear();
            for (let i = -range; i <= range; i++) {
                const year = currentYear + i;
                const option = document.createElement('option');
                option.value = year;
                option.textContent = `${year}å¹´`;
                if (year === currentYear) option.selected = true;
                if (reverse) selector.prepend(option);
                else selector.appendChild(option);
            }
        }
        function getNayinForYear(year) {
            const offset = year - 1984; const stemIndex = (offset % 10 + 10) % 10; const branchIndex = (offset % 12 + 12) % 12; const jiazi = heavenlyStems[stemIndex] + earthlyBranches[branchIndex];
            for(const key in naYinData) { if(key.includes(jiazi)) { return `ã€${jiazi}å¹´ã€‘ç”Ÿäººï¼Œå…¶çº³éŸ³äº”è¡Œä¸ºã€${naYinData[key]}ã€‘ã€‚`; } } return 'æš‚æ— è¯¥å¹´ä»½çš„çº³éŸ³è§£æã€‚';
        }
        function updateZodiacView(animal) {
            document.getElementById('zodiac-nayin-text').textContent = getNayinForYear(zodiacYearSelector.value);
        }
        zodiacCards.forEach(card => {
            card.addEventListener('click', () => {
                const animal = card.dataset.animal;
                const data = zodiacStaticData[animal];
                document.getElementById('zodiac-icon').textContent = data.icon;
                document.getElementById('zodiac-name').textContent = `å±${data.name}`;
                document.getElementById('zodiac-character').textContent = data.character;
                document.getElementById('zodiac-relations').innerHTML = `
                    <p><strong class="text-accent">ä¸‰åˆè´µäºº:</strong> ${data.relations.sanhe}</p>
                    <p><strong class="text-accent">å…­åˆè´µäºº:</strong> ${data.relations.liuhe}</p>
                    <p><strong class="text-red-400">ç›¸å†²å±ç›¸:</strong> ${data.relations.chong}</p>
                    <p><strong class="text-yellow-400">ç›¸å®³å±ç›¸:</strong> ${data.relations.hai}</p>
                `;
                updateZodiacView(animal);
                zodiacDetail.dataset.currentAnimal = animal;
                zodiacDetail.classList.remove('hidden');
                zodiacDetail.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });
        });
        zodiacYearSelector.addEventListener('change', () => {
            const currentAnimal = zodiacDetail.dataset.currentAnimal;
            if (currentAnimal) updateZodiacView(currentAnimal);
        });
        closeZodiacBtn.addEventListener('click', () => zodiacDetail.classList.add('hidden'));

        // --- é¡µé¢åˆå§‹åŒ– ---
        document.addEventListener('DOMContentLoaded', () => {
            populateYearSelector('zodiac-year-selector', 40, true);
        });
    </script>
</body>
</html>
